(self.webpackChunkbugu=self.webpackChunkbugu||[]).push([[7191],{4491:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>t});const t={key:"v-bb6f5158",path:"/iOS/CodeSnippet/iOS_plist%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%86%99%E5%85%A5%E3%80%81%E4%BF%AE%E6%94%B9%E3%80%81%E5%88%A0%E9%99%A4.html",title:"iOS plist文件读写操作，写入、修改、删除",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"plist 读取数据",slug:"plist-读取数据",children:[]},{level:2,title:"plist 添加数据",slug:"plist-添加数据",children:[]},{level:2,title:"plist 删除所有数据",slug:"plist-删除所有数据",children:[]},{level:2,title:"plist 删除文件",slug:"plist-删除文件",children:[]}],filePathRelative:"iOS/CodeSnippet/iOS_plist文件读写操作，写入、修改、删除.md",git:{updatedTime:1600154199e3}}},4313:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var t=a(6252);const p={class:"table-of-contents"},o=(0,t.Uk)("plist 读取数据"),e=(0,t.Uk)("plist 添加数据"),c=(0,t.Uk)("plist 删除所有数据"),l=(0,t.Uk)("plist 删除文件"),i=(0,t.uE)('<h1 id="ios-plist文件读写操作-写入、修改、删除"><a class="header-anchor" href="#ios-plist文件读写操作-写入、修改、删除">#</a> iOS plist文件读写操作，写入、修改、删除</h1><h2 id="plist-读取数据"><a class="header-anchor" href="#plist-读取数据">#</a> plist 读取数据</h2><div class="language-swift ext-swift line-numbers-mode"><pre class="language-swift"><code>#pragma mark <span class="token operator">-</span> plist 读取数据\n<span class="token operator">-</span><span class="token punctuation">(</span><span class="token builtin">NSArray</span> <span class="token operator">*</span><span class="token punctuation">)</span>historicalRecordReadTheData<span class="token punctuation">{</span>\n    <span class="token builtin">NSString</span> <span class="token operator">*</span> filePath <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token function">NSSearchPathForDirectoriesInDomains</span><span class="token punctuation">(</span><span class="token builtin">NSDocumentDirectory</span><span class="token punctuation">,</span> <span class="token builtin">NSUserDomainMask</span><span class="token punctuation">,</span> <span class="token constant">YES</span><span class="token punctuation">)</span> firstObject<span class="token punctuation">]</span> stringByAppendingPathComponent<span class="token punctuation">:</span>@<span class="token string">&quot;historicalRecord.plist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token comment">//是数组就用数组来获取数据，是字典就用字典来获取数据</span>\n    <span class="token builtin">NSMutableArray</span> <span class="token operator">*</span> historicalRecordArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">NSMutableArray</span> alloc<span class="token punctuation">]</span> initWithContentsOfFile<span class="token punctuation">:</span>filePath<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> historicalRecordArr<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="plist-添加数据"><a class="header-anchor" href="#plist-添加数据">#</a> plist 添加数据</h2><div class="language-swift ext-swift line-numbers-mode"><pre class="language-swift"><code>#pragma mark <span class="token operator">-</span> plist 添加数据\n<span class="token operator">-</span><span class="token punctuation">(</span>void<span class="token punctuation">)</span>historicalRecordAddData<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSString</span> <span class="token operator">*</span><span class="token punctuation">)</span>string<span class="token punctuation">{</span>\n    <span class="token builtin">NSString</span> <span class="token operator">*</span> filePath <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token function">NSSearchPathForDirectoriesInDomains</span><span class="token punctuation">(</span><span class="token builtin">NSDocumentDirectory</span><span class="token punctuation">,</span> <span class="token builtin">NSUserDomainMask</span><span class="token punctuation">,</span> <span class="token constant">YES</span><span class="token punctuation">)</span> firstObject<span class="token punctuation">]</span> stringByAppendingPathComponent<span class="token punctuation">:</span>@<span class="token string">&quot;historicalRecord.plist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token builtin">NSMutableArray</span> <span class="token operator">*</span> historicalRecordArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">NSMutableArray</span> alloc<span class="token punctuation">]</span> initWithContentsOfFile<span class="token punctuation">:</span>filePath<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>historicalRecordArr<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        historicalRecordArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">NSMutableArray</span> alloc<span class="token punctuation">]</span><span class="token keyword">init</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span>historicalRecordArr containsObject<span class="token punctuation">:</span>string<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token punctuation">[</span>historicalRecordArr addObject<span class="token punctuation">:</span>string<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token constant">BOOL</span> success <span class="token operator">=</span> <span class="token punctuation">[</span>historicalRecordArr writeToFile<span class="token punctuation">:</span>filePath atomically<span class="token punctuation">:</span><span class="token constant">YES</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;写入成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>\n        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;写入失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="plist-删除所有数据"><a class="header-anchor" href="#plist-删除所有数据">#</a> plist 删除所有数据</h2><div class="language-swift ext-swift line-numbers-mode"><pre class="language-swift"><code>#pragma mark <span class="token operator">-</span> plist 删除所有数据\n<span class="token operator">-</span><span class="token punctuation">(</span>void<span class="token punctuation">)</span>historicalRecordstring<span class="token punctuation">{</span>\n    <span class="token builtin">NSString</span> <span class="token operator">*</span> filePath <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token function">NSSearchPathForDirectoriesInDomains</span><span class="token punctuation">(</span><span class="token builtin">NSDocumentDirectory</span><span class="token punctuation">,</span> <span class="token builtin">NSUserDomainMask</span><span class="token punctuation">,</span> <span class="token constant">YES</span><span class="token punctuation">)</span> firstObject<span class="token punctuation">]</span> stringByAppendingPathComponent<span class="token punctuation">:</span>@<span class="token string">&quot;historicalRecord.plist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token builtin">NSMutableArray</span> <span class="token operator">*</span> historicalRecordArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">NSMutableArray</span> alloc<span class="token punctuation">]</span> initWithContentsOfFile<span class="token punctuation">:</span>filePath<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">[</span>historicalRecordArr removeAllObjects<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">[</span>historicalRecordArr writeToFile<span class="token punctuation">:</span>filePath atomically<span class="token punctuation">:</span><span class="token constant">YES</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="plist-删除文件"><a class="header-anchor" href="#plist-删除文件">#</a> plist 删除文件</h2><div class="language-swift ext-swift line-numbers-mode"><pre class="language-swift"><code>#pragma mark <span class="token operator">-</span> plist 删除文件\n<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>removeLocalPlist <span class="token punctuation">{</span>\n    <span class="token comment">//清除plist文件</span>\n    <span class="token builtin">NSFileManager</span> <span class="token operator">*</span>fileMger <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">NSFileManager</span> defaultManager<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token builtin">NSString</span> <span class="token operator">*</span>filePath <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token function">NSSearchPathForDirectoriesInDomains</span><span class="token punctuation">(</span><span class="token builtin">NSDocumentDirectory</span><span class="token punctuation">,</span> <span class="token builtin">NSUserDomainMask</span><span class="token punctuation">,</span> <span class="token constant">YES</span><span class="token punctuation">)</span>objectAtIndex<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>stringByAppendingPathComponent<span class="token punctuation">:</span>@<span class="token string">&quot;local.plist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token comment">//如果文件路径存在的话</span>\n    <span class="token constant">BOOL</span> bRet <span class="token operator">=</span> <span class="token punctuation">[</span>fileMger fileExistsAtPath<span class="token punctuation">:</span>filePath<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>bRet<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token builtin">NSError</span> <span class="token operator">*</span>err<span class="token punctuation">;</span>\n        <span class="token punctuation">[</span>fileMger removeItemAtPath<span class="token punctuation">:</span>filePath error<span class="token punctuation">:</span><span class="token operator">&amp;</span>err<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><p><strong>相关文章</strong></p><ul><li><a href="./../iOS%E6%B2%99%E7%9B%92%E8%B7%AF%E5%BE%84%E8%8E%B7%E5%8F%96%E6%95%B4%E7%90%86">iOS沙盒路径获取整理</a></li></ul>',12),u={render:function(n,s){const a=(0,t.up)("RouterLink");return(0,t.wg)(),(0,t.j4)(t.HY,null,[(0,t.Wm)("nav",p,[(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)(a,{to:"#plist-读取数据"},{default:(0,t.w5)((()=>[o])),_:1})]),(0,t.Wm)("li",null,[(0,t.Wm)(a,{to:"#plist-添加数据"},{default:(0,t.w5)((()=>[e])),_:1})]),(0,t.Wm)("li",null,[(0,t.Wm)(a,{to:"#plist-删除所有数据"},{default:(0,t.w5)((()=>[c])),_:1})]),(0,t.Wm)("li",null,[(0,t.Wm)(a,{to:"#plist-删除文件"},{default:(0,t.w5)((()=>[l])),_:1})])])]),i],64)}}}}]);